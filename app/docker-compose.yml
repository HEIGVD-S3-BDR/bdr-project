services:
  postgresql:
    image: "bitnami/postgresql:16"
    environment:
      - POSTGRESQL_USERNAME=bdr
      - POSTGRESQL_PASSWORD=bdr
      - POSTGRESQL_DATABASE=bdr
      - POSTGRESQL_POSTGRES_PASSWORD=root
    ports:
      - 5432:5432
    volumes:
      - .:/data:ro
    networks:
      - bdr-net

  flask-app:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      - FLASK_ENV=development
      - PAGILA_DB=postgresql://bdr:bdr@postgresql:5432/bdr
    volumes:
      - .:/app:ro
    ports:
      - 8080:8080
    networks:
      - bdr-net
    depends_on:
      - postgresql

networks:
  bdr-net:
    driver: bridge
